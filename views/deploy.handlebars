<div class="body">
  <div>Contract ABI: <span id="spanAbi">[{"constant":true,"inputs":[],"name":"seller","outputs":[{"name":"","type":"address"}],"payable":false,"type":"function"},{"constant":false,"inputs":[],"name":"release","outputs":[],"payable":false,"type":"function"},{"constant":true,"inputs":[{"name":"","type":"address"}],"name":"buyers","outputs":[{"name":"","type":"uint256"}],"payable":false,"type":"function"},{"constant":false,"inputs":[],"name":"buy","outputs":[],"payable":true,"type":"function"},{"inputs":[],"payable":false,"type":"constructor"},{"anonymous":false,"inputs":[{"indexed":false,"name":"buyer","type":"address"},{"indexed":false,"name":"amount","type":"uint256"}],"name":"LogPurchase","type":"event"},{"anonymous":false,"inputs":[{"indexed":false,"name":"buyer","type":"address"},{"indexed":false,"name":"amount","type":"uint256"}],"name":"LogRelease","type":"event"},{"anonymous":false,"inputs":[{"indexed":false,"name":"buyer","type":"address"},{"indexed":false,"name":"amount","type":"uint256"}],"name":"LogReleaseFailure","type":"event"}]</span></div>
  <div>Contract Bytecode: <span id="spanBytecode"></span></div>

  <button id="btnDeploy">Deploy Contract</button>
</div>

<script>

  $(document).on('ready', function() { 
    var contractAbi = [{"constant":true,"inputs":[],"name":"seller","outputs":[{"name":"","type":"address"}],"payable":false,"type":"function"},{"constant":false,"inputs":[],"name":"release","outputs":[],"payable":false,"type":"function"},{"constant":true,"inputs":[{"name":"","type":"address"}],"name":"buyers","outputs":[{"name":"","type":"uint256"}],"payable":false,"type":"function"},{"constant":false,"inputs":[],"name":"buy","outputs":[],"payable":true,"type":"function"},{"inputs":[],"payable":true,"type":"constructor"},{"anonymous":false,"inputs":[{"indexed":false,"name":"buyer","type":"address"},{"indexed":false,"name":"amount","type":"uint256"}],"name":"LogPurchase","type":"event"},{"anonymous":false,"inputs":[{"indexed":false,"name":"buyer","type":"address"},{"indexed":false,"name":"amount","type":"uint256"}],"name":"LogRelease","type":"event"},{"anonymous":false,"inputs":[{"indexed":false,"name":"buyer","type":"address"},{"indexed":false,"name":"amount","type":"uint256"}],"name":"LogReleaseFailure","type":"event"}]
    var contractBytecode = '0x60606040525b33600060006101000a81548173ffffffffffffffffffffffffffffffffffffffff021916908373ffffffffffffffffffffffffffffffffffffffff1602179055505b5b610434806100576000396000f30060606040526000357c0100000000000000000000000000000000000000000000000000000000900463ffffffff16806308551a531461005c57806386d1a69f146100ae57806397a993aa146100c0578063a6f2ae3a1461010a575bfe5b341561006457fe5b61006c610114565b604051808273ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200191505060405180910390f35b34156100b657fe5b6100be61013a565b005b34156100c857fe5b6100f4600480803573ffffffffffffffffffffffffffffffffffffffff16906020019091905050610335565b6040518082815260200191505060405180910390f35b61011261034d565b005b600060009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1681565b600060009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff166108fc600160003373ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff168152602001908152602001600020549081150290604051809050600060405180830381858888f1935050505015610287577f4870984673bc1d83230a9897f845d74cfd161d5f556e181d08c56ec6acc92bac33600160003373ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200190815260200160002054604051808373ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1681526020018281526020019250505060405180910390a1610332565b7fd7687593db5fc351370e3bd22f93153e4c818ca45155c7d1cd1133ffa67938ef33600160003373ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200190815260200160002054604051808373ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1681526020018281526020019250505060405180910390a15b5b565b60016020528060005260406000206000915090505481565b7fd4d72ecb9cb4a8f0288080b5a70183dae4a8b3415f6aacd780f148c8e4cbe3ea3334604051808373ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1681526020018281526020019250505060405180910390a134600160003373ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff168152602001908152602001600020600082825401925050819055505b5600a165627a7a723058207cfc5ae7d095259c34037f23ca4fce7519327f42089afb316d1656054deb1f2b0029'

    $("#spanBytecode").text(contractBytecode)

    $("#btnDeploy").on('click', function() {
      web3.eth.getAccounts(function(e, accounts) {
        console.log(accounts)
        var contract = web3.eth.contract(contractAbi)
        var contractInstance = contract.new(
        {
          from: accounts[0], 
          data: contractBytecode, 
          gas: '4700000'
        }, function (e, contract){
          alert(e)
          console.log(e, contract);
          if (contract && typeof contract.address !== 'undefined') {
            console.log('Contract mined! address: ' + contract.address + ' transactionHash: ' + contract.transactionHash)
          }
        })
      })
    })
  })

</script>

<style>

  .body {
    width: 100%;
    padding: 50px;
    overflow: hidden;
  }

</style>